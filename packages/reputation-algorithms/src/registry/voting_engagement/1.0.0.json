{
    "key": "voting_engagement",
    "name": "Voting Engagement",
    "category": "engagement",
    "description": "Computes Ve(i) = H(i)/log2(11) where H(i) is the entropy of user i over {skip,1..10}.",
    "version": "1.0.0",
    "inputs": [
        {
            "key": "votes",
            "label": "Votes CSV",
            "description": "Upload a CSV with the columns below (aliases allowed).",
            "type": "csv",
            "csv": {
                "hasHeader": true,
                "delimiter": ",",
                "maxRows": 200000,
                "maxBytes": 104857600,
                "columns": [
                    {
                        "key": "collection_id",
                        "type": "string",
                        "aliases": ["voter_id", "user_id"],
                        "description": "Unique voter identifier"
                    },
                    {
                        "key": "proposal_id",
                        "type": "string",
                        "aliases": ["question", "proposalId"],
                        "description": "Unique proposal identifier"
                    },
                    {
                        "key": "vote",
                        "type": "enum",
                        "enum": [
                            "skip",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            "10"
                        ],
                        "description": "Vote value or skip"
                    },
                    { "key": "timestamp", "type": "date", "required": false },
                    { "key": "round", "type": "string", "required": false }
                ]
            }
        }
    ],
    "outputs": [
        {
            "key": "voting_engagement",
            "label": "Voting Engagement by User",
            "description": "Ve(i) in [0,1]",
            "type": "csv",
            "csv": {
                "hasHeader": true,
                "delimiter": ",",
                "columns": [
                    {
                        "key": "collection_id",
                        "type": "string",
                        "aliases": ["voter_id", "user_id"],
                        "description": "Unique user identifier"
                    },
                    {
                        "key": "voting_engagement",
                        "type": "number",
                        "description": "Voting engagement score Ve(i) in [0,1]"
                    }
                ]
            }
        }
    ]
}
