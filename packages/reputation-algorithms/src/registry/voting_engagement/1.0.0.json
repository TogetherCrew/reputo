{
    "key": "voting_engagement",
    "name": "Voting Engagement",
    "category": "engagement",
    "description": "Computes Ve(i) = H(i)/log2(11) where H(i) is the entropy of user i over {skip,1..10}.",
    "version": "1.0.0",
    "inputs": [
        {
            "key": "votes",
            "label": "Votes CSV",
            "description": "Upload a CSV with the columns below (aliases allowed).",
            "type": "csv",
            "csv": {
                "hasHeader": true,
                "delimiter": ",",
                "maxRows": 200000,
                "maxBytes": 104857600,
                "columns": [
                    {
                        "key": "id",
                        "type": "number",
                        "required": false,
                        "description": "Row identifier"
                    },
                    {
                        "key": "event_id",
                        "type": "number",
                        "required": false,
                        "description": "Voting event identifier"
                    },
                    {
                        "key": "answer",
                        "type": "enum",
                        "enum": [
                            "skip",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            "10"
                        ],
                        "description": "Vote value or skip"
                    },
                    {
                        "key": "created_on",
                        "type": "date",
                        "required": false,
                        "description": "Creation timestamp of the vote"
                    },
                    {
                        "key": "updated_on",
                        "type": "date",
                        "required": false,
                        "description": "Last update timestamp of the vote"
                    },
                    {
                        "key": "question_id",
                        "type": "string",
                        "description": "Unique proposal/question identifier"
                    },
                    {
                        "key": "balance",
                        "type": "number",
                        "required": false,
                        "description": "Balance at time of vote (if provided)"
                    },
                    {
                        "key": "stake",
                        "type": "number",
                        "required": false,
                        "description": "Stake associated with the vote (if provided)"
                    },
                    {
                        "key": "collection_id",
                        "type": "string",
                        "description": "Unique voter identifier"
                    },
                    {
                        "key": "vote_id",
                        "type": "number",
                        "required": false,
                        "description": "Vote identifier"
                    }
                ]
            }
        }
    ],
    "outputs": [
        {
            "key": "voting_engagement",
            "label": "Voting Engagement by User",
            "description": "Ve(i) in [0,1]",
            "type": "csv",
            "csv": {
                "hasHeader": true,
                "delimiter": ",",
                "columns": [
                    {
                        "key": "collection_id",
                        "type": "string",
                        "aliases": ["voter_id", "user_id"],
                        "description": "Unique user identifier"
                    },
                    {
                        "key": "voting_engagement",
                        "type": "number",
                        "description": "Voting engagement score Ve(i) in [0,1]"
                    }
                ]
            }
        }
    ],
    "runtime": {
        "taskQueue": "typescript-worker",
        "activity": "voting_engagement"
    }
}
