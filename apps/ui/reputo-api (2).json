{"openapi":"3.0.0","paths":{"/algorithm-presets":{"post":{"description":"Creates a new algorithm preset with key, version, inputs, and optional metadata.","operationId":"AlgorithmPresetController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAlgorithmPresetDto"}}}},"responses":{"201":{"description":"Algorithm preset successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlgorithmPresetDto"}}}},"400":{"description":"Invalid request body (missing required fields, invalid data types, name must be 3-100 chars, description must be 10-500 chars, or validation error)"}},"summary":"Create a new algorithm preset","tags":["Algorithm Presets"]},"get":{"description":"Retrieves a paginated list of all algorithm presets with optional sorting.","operationId":"AlgorithmPresetController_list","parameters":[{"name":"sortBy","required":false,"in":"query","description":"Sorting criteria using the format: sortField:(desc|asc). Multiple sorting criteria should be separated by commas","schema":{"example":"createdAt:desc","type":"string"}},{"name":"populate","required":false,"in":"query","description":"Populate data fields (comma-separated)","schema":{"example":"algorithmPreset","type":"string"}},{"name":"limit","required":false,"in":"query","description":"Maximum number of results per page","schema":{"minimum":1,"default":10,"example":10,"type":"number"}},{"name":"page","required":false,"in":"query","description":"Current page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"key","required":false,"in":"query","description":"Filter by algorithm key","schema":{"example":"voting_engagement","type":"string"}},{"name":"version","required":false,"in":"query","description":"Filter by algorithm version","schema":{"example":"1.0.0","type":"string"}}],"responses":{"200":{"description":"Successfully retrieved algorithm presets","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginationDto"}}}}},"summary":"List all algorithm presets","tags":["Algorithm Presets"]}},"/algorithm-presets/{id}":{"get":{"description":"Retrieves a single algorithm preset by its unique identifier.","operationId":"AlgorithmPresetController_getById","parameters":[{"name":"id","required":true,"in":"path","description":"Algorithm preset unique identifier","schema":{"example":"66f9c9...","type":"string"}}],"responses":{"200":{"description":"Successfully retrieved algorithm preset","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlgorithmPresetDto"}}}},"400":{"description":"Invalid ID format"},"404":{"description":"Algorithm preset not found"}},"summary":"Get an algorithm preset by ID","tags":["Algorithm Presets"]},"patch":{"description":"Updates an existing algorithm preset. Note: key and version fields are immutable and cannot be updated.","operationId":"AlgorithmPresetController_updateById","parameters":[{"name":"id","required":true,"in":"path","description":"Algorithm preset unique identifier","schema":{"example":"66f9c9...","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAlgorithmPresetDto"}}}},"responses":{"200":{"description":"Algorithm preset successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlgorithmPresetDto"}}}},"400":{"description":"Invalid request body, ID format, name must be 3-100 chars, description must be 10-500 chars, or validation error"},"404":{"description":"Algorithm preset not found"}},"summary":"Update an algorithm preset","tags":["Algorithm Presets"]},"delete":{"description":"Permanently deletes an algorithm preset by its unique identifier.","operationId":"AlgorithmPresetController_deleteById","parameters":[{"name":"id","required":true,"in":"path","description":"Algorithm preset unique identifier","schema":{"example":"66f9c9...","type":"string"}}],"responses":{"204":{"description":"Algorithm preset successfully deleted"},"400":{"description":"Invalid ID format"},"404":{"description":"Algorithm preset not found"}},"summary":"Delete an algorithm preset","tags":["Algorithm Presets"]}},"/snapshots":{"post":{"description":"Creates a new snapshot for an algorithm preset. Status defaults to \"queued\".","operationId":"SnapshotController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSnapshotDto"}}}},"responses":{"201":{"description":"Snapshot successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SnapshotDto"}}}},"400":{"description":"Invalid request body or AlgorithmPreset ID format"}},"summary":"Create a new snapshot","tags":["Snapshots"]},"get":{"description":"Retrieves a paginated list of snapshots with optional filtering by status and algorithmPreset, sorting, and population.","operationId":"SnapshotController_list","parameters":[{"name":"sortBy","required":false,"in":"query","description":"Sorting criteria using the format: sortField:(desc|asc). Multiple sorting criteria should be separated by commas","schema":{"example":"createdAt:desc","type":"string"}},{"name":"populate","required":false,"in":"query","description":"Populate data fields (comma-separated)","schema":{"example":"algorithmPreset","type":"string"}},{"name":"limit","required":false,"in":"query","description":"Maximum number of results per page","schema":{"minimum":1,"default":10,"example":10,"type":"number"}},{"name":"page","required":false,"in":"query","description":"Current page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"status","required":false,"in":"query","description":"Filter by execution status","schema":{"example":"completed","type":"string","enum":["queued","running","completed","failed","cancelled"]}},{"name":"algorithmPreset","required":false,"in":"query","description":"Filter by AlgorithmPreset ID","schema":{"example":"66f9c9...","type":"string"}},{"name":"key","required":false,"in":"query","description":"Filter by algorithm key","schema":{"example":"voting_engagement","type":"string"}},{"name":"version","required":false,"in":"query","description":"Filter by algorithm version","schema":{"example":"1.0.0","type":"string"}}],"responses":{"200":{"description":"Successfully retrieved snapshots","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginationDto"}}}},"400":{"description":"Invalid AlgorithmPreset ID format in filter"}},"summary":"List all snapshots","tags":["Snapshots"]}},"/snapshots/{id}":{"get":{"description":"Retrieves a single snapshot by its unique identifier.","operationId":"SnapshotController_getById","parameters":[{"name":"id","required":true,"in":"path","description":"Snapshot unique identifier","schema":{"example":"6710be...","type":"string"}}],"responses":{"200":{"description":"Successfully retrieved snapshot","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SnapshotDto"}}}},"400":{"description":"Invalid ID format"},"404":{"description":"Snapshot not found"}},"summary":"Get a snapshot by ID","tags":["Snapshots"]},"delete":{"description":"Permanently deletes a snapshot by its unique identifier.","operationId":"SnapshotController_deleteById","parameters":[{"name":"id","required":true,"in":"path","description":"Snapshot unique identifier","schema":{"example":"6710be...","type":"string"}}],"responses":{"204":{"description":"Snapshot successfully deleted"},"400":{"description":"Invalid ID format"},"404":{"description":"Snapshot not found"}},"summary":"Delete a snapshot","tags":["Snapshots"]}}},"info":{"title":"Reputo API","description":"Reputo API for reputation management","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"/api/v1"}],"components":{"schemas":{"PaginationDto":{"type":"object","properties":{"results":{"description":"Results found","type":"array","items":{"type":"array"}},"page":{"type":"number","description":"Current page","example":1},"limit":{"type":"number","description":"Maximum number of results per page","example":10},"totalPages":{"type":"number","description":"Total number of pages","example":5},"totalResults":{"type":"number","description":"Total number of documents","example":47}},"required":["results","page","limit","totalPages","totalResults"]},"AlgorithmPresetInputDto":{"type":"object","properties":{"key":{"type":"string","description":"Parameter key/name","example":"votes"},"value":{"type":"object","description":"Parameter value (can be any type)","example":"s3://tc/votes.csv"}},"required":["key"]},"AlgorithmPresetDto":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier","example":"66f9c9..."},"key":{"type":"string","description":"Unique algorithm identifier","example":"voting_engagement"},"version":{"type":"string","description":"Algorithm version","example":"1.0.0"},"inputs":{"description":"Array of input parameters","type":"array","items":{"$ref":"#/components/schemas/AlgorithmPresetInputDto"}},"name":{"type":"string","description":"Human-readable name (3-100 characters)","example":"Voting engagement v1","minLength":3,"maxLength":100},"description":{"type":"string","description":"Description of the preset (10-500 characters)","example":"TogetherCrew test","minLength":10,"maxLength":500},"createdAt":{"format":"date-time","type":"string","description":"Creation timestamp","example":"2025-10-13T18:22:47.100Z"},"updatedAt":{"format":"date-time","type":"string","description":"Last update timestamp","example":"2025-10-13T18:22:47.100Z"}},"required":["_id","key","version","inputs","createdAt","updatedAt"]},"CreateAlgorithmPresetDto":{"type":"object","properties":{"key":{"type":"string","description":"Unique algorithm identifier","example":"voting_engagement"},"version":{"type":"string","description":"Algorithm version","example":"1.0.0"},"inputs":{"description":"Array of input parameters for the algorithm preset","example":[{"key":"votes","value":"s3://tc/votes.csv"}],"type":"array","items":{"$ref":"#/components/schemas/AlgorithmPresetInputDto"}},"name":{"type":"string","description":"Optional name for the algorithm preset (3-100 characters)","example":"Voting engagement v1","minLength":3,"maxLength":100},"description":{"type":"string","description":"Optional description of the algorithm preset (10-500 characters)","example":"TogetherCrew test","minLength":10,"maxLength":500}},"required":["key","version","inputs"]},"UpdateAlgorithmPresetDto":{"type":"object","properties":{"inputs":{"description":"Array of input parameters for the algorithm preset","example":[{"key":"votes","value":"s3://tc/votes.csv"}],"type":"array","items":{"$ref":"#/components/schemas/AlgorithmPresetInputDto"}},"name":{"type":"string","description":"Optional name for the algorithm preset (3-100 characters)","example":"Voting engagement v1","minLength":3,"maxLength":100},"description":{"type":"string","description":"Optional description of the algorithm preset (10-500 characters)","example":"TogetherCrew test","minLength":10,"maxLength":500}}},"SnapshotTemporalDto":{"type":"object","properties":{"workflowId":{"type":"string","description":"Temporal workflow ID","example":"wf-voting-engagement-abc123"},"runId":{"type":"string","description":"Temporal workflow run ID","example":"a1b2c3"},"taskQueue":{"type":"string","description":"Temporal task queue name","example":"algorithms"}}},"SnapshotDto":{"type":"object","properties":{"_id":{"type":"string","description":"Unique identifier","example":"6710be..."},"status":{"type":"string","description":"Current execution status","enum":["queued","running","completed","failed","cancelled"],"example":"completed"},"temporal":{"description":"Temporal workflow information","allOf":[{"$ref":"#/components/schemas/SnapshotTemporalDto"}]},"algorithmPreset":{"type":"object","description":"Reference to the associated AlgorithmPreset","example":"66f9c9..."},"outputs":{"type":"object","description":"Algorithm execution outputs","example":{}},"createdAt":{"format":"date-time","type":"string","description":"Creation timestamp","example":"2025-10-13T19:12:03.010Z"},"updatedAt":{"format":"date-time","type":"string","description":"Last update timestamp","example":"2025-10-13T19:12:44.600Z"}},"required":["_id","status","algorithmPreset","createdAt","updatedAt"]},"CreateSnapshotDto":{"type":"object","properties":{"algorithmPreset":{"type":"string","description":"Reference to the associated AlgorithmPreset","example":"66f9c9..."},"temporal":{"description":"Optional Temporal workflow information","allOf":[{"$ref":"#/components/schemas/SnapshotTemporalDto"}]},"outputs":{"type":"object","description":"Algorithm execution outputs","example":{}}},"required":["algorithmPreset"]}}}}